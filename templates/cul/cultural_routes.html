{% set fallback_cards = [
  {'id':1,'title':'–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä','short':'–ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –∫—É–ª—å—Ç—É—Ä–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–∏–µ –≥–æ—Ä–æ–¥–∞ —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º –º—É–∑–µ–µ–≤, —Ç–µ–∞—Ç—Ä–æ–≤ –∏ —Å—Ç–∞—Ä–∏–Ω–Ω—ã—Ö —É–ª–∏—Ü.','img':'cult1.png'},
  {'id':2,'title':'–ó–µ–ª—ë–Ω—ã–π –ø—É—Ç—å –ê–ª–º–∞—Ç—ã','short':'–ú–∞—Ä—à—Ä—É—Ç –ø–æ –ª—É—á—à–∏–º –∫–∞—Ñ–µ, —Ä—ã–Ω–∫–∞–º –∏ –º–µ—Å—Ç–∞–º, –≥–¥–µ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –º–µ—Å—Ç–Ω—ã–µ –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã.','img':'cul4.jpeg'},
  {'id':3,'title':'–ê—Ä—Ç-–ø—Ä–æ–≥—É–ª–∫–∞','short':'–ü–æ—Å–µ—â–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–π, —É–ª–∏—á–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ –∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –≥–æ—Ä–æ–¥–∞.','img':'cult2.png'},
  {'id':4,'title':'–ö–∞–∑–∞—Ö—Å–∫–∞—è –∫—É—Ö–Ω—è: —Ç—Ä–∞–¥–∏—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏–∫–∞','short':'–ü–æ–∑–≤–æ–ª—è–µ—Ç –≥–ª—É–±–∂–µ –ø–æ–Ω—è—Ç—å –∫—É–ª—å—Ç—É—Ä—É —á–µ—Ä–µ–∑ –µ–¥—É.','img':'gast6.jpg'},
  {'id':5,'title':'–£–ª–∏—á–Ω–∞—è –µ–¥–∞ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–≤–æ—Ä–∏—Ç—ã','short':'–ù–µ–¥–æ—Ä–æ–≥–æ, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ, —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ.','img':'gast5.jpg'},
  {'id':6,'title':'–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫—É—Ö–Ω—è –ê–ª–º–∞—Ç—ã: fusion –∏ –∞–≤—Ç–æ—Ä—Å–∫–∞—è –ø–æ–¥–∞—á–∞','short':'–î–ª—è —Ç–µ—Ö, –∫—Ç–æ –ª—é–±–∏—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –∏ —ç—Å—Ç–µ—Ç–∏–∫—É.','img':'gast3.jpeg'}
] %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta name="csrf-token" content="{{ csrf_token() }}">
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title data-i18n="___">–ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –∏ –≥–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã</title>
  <script src="/static/js/translate.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
  <style>
    *:focus:not(:focus-visible){outline:none;}
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
    body{background-color:#fdfdfc;color:#333;}
    header{background-color:white;padding:20px;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,0.05);font-size:1.5rem;font-weight:bold;position:relative;}
    .route-page{padding:40px 20px;max-width:1200px;margin:0 auto;}
    .route-page h2{text-align:center;font-size:2rem;margin-bottom:30px;}
    .route-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;}
    .route-card{background-color:white;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.1);transition:transform 0.3s ease;cursor:pointer;position:relative;}
    .route-card:hover{transform:translateY(-8px);}
    .route-card img{width:100%;height:180px;object-fit:cover;}
    .route-card .info{padding:20px;}
    .route-card .info h3{margin-bottom:10px;font-size:1.2rem;color:#333;}
    .route-card .info p{font-size:0.95rem;color:#555;}
    a{text-decoration:none;}
    .back-arrow{display:inline-block;font-size:28px;text-decoration:none;color:#333;padding:10px;transition:all 0.2s ease;position:absolute;left:10px;top:10px;}
    .back-arrow:hover{color:#007BFF;transform:translateX(-4px);}
    .admin-panel{display:flex;justify-content:flex-end;margin:20px 0;}
    .admin-panel a{display:inline-block;padding:8px 15px;background:#007BFF;color:white;text-decoration:none;border-radius:5px;margin-left:10px;}
    .admin-panel a:hover{background:#0056b3;}
    .admin-actions{position:absolute;top:10px;right:10px;display:flex;gap:5px;z-index:2;}
    .admin-actions a{background:#fff;padding:5px 10px;border-radius:4px;font-size:12px;color:#333;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    .admin-actions a:hover{background:#f1f1f1;}
  </style>
</head>
<body>
  <header>
    <a data-i18n="!" href="/index" class="back-arrow">‚Üê</a>
    –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –∏ –≥–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
  </header>

  <section class="route-page">
    {% if current_user.is_authenticated and current_user.is_admin %}
    <div class="admin-panel">
      <a href="{{ url_for('admin.add_route') }}">‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</a>
      <a href="{{ url_for('admin.routes_list') }}">üìã –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã</a>
    </div>
    {% endif %}

    <h2 data-i18n="_">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç</h2>
    <div class="route-list">
      {# –µ—Å–ª–∏ –≤ –ë–î –µ—Å—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö #}
      {% if routes and routes|length %}
        {% for r in routes %}
        <div class="route-card">
          <a href="{{ url_for('cul_dynamic', route_id=r.id) }}">
            <img alt="{{ r.title }}" src="{{ '/static/uploads/' ~ r.image_url if r.image_url else '../static/img/cult1.png' }}">
            <div class="info">
              <h3>{{ r.title }}</h3>
              <p>{{ r.short_description or r.description or '' }}</p>
            </div>
          </a>
          {% if current_user.is_authenticated and current_user.is_admin %}
          <div class="admin-actions">
            <a href="{{ url_for('admin.edit_route', id=r.id) }}">–†–µ–¥.</a>
            <a href="{{ url_for('admin.delete_route', id=r.id) }}" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç?')">üóë</a>
          </div>
          {% endif %}
        </div>
        {% endfor %}
      {% else %}
        {# fallback: —Ç–≤–æ–∏ —Å—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ #}
        {% for f in fallback_cards %}
        <div class="route-card">
          <a href="/cul_{{ f.id }}">
            <img alt="{{ f.title }}" src="../static/img/{{ f.img }}"/>
            <div class="info">
              <h3>{{ f.title }}</h3>
              <p>{{ f.short }}</p>
            </div>
          </a>
          {% if current_user.is_authenticated and current_user.is_admin %}
          <div class="admin-actions">
            <!-- –ï—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–Ω–∞—è, –ø—Ä–µ–¥–ª–æ–∂–∏–º —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î -->
            <a href="{{ url_for('admin.add_route') }}">–°–æ–∑–¥–∞—Ç—å</a>
          </div>
          {% endif %}
        </div>
        {% endfor %}
      {% endif %}
    </div>
  </section>
</body>
</html>
